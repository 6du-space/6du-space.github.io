var t,e,n={};async function s(t){var e={};new URL(t.url).host!=location.host&&(e.credentials="omit");const n=await fetch(t.clone(),e);if(n&&n.ok){var s=!0;for(const[t,e]of n.headers)if("cache-control"==t){s=!(e.indexOf("no-cache")+1);break}if(s){const e=n.clone();caches.open(1).then(n=>{n.put(t,e)})}}return n}self.addEventListener("message",async s=>{var a=s.data;t=new Set(Object.keys(a.url));for(let t in a.cdn){var i=a.cdn[t]||`//${location.host}/`;i.startsWith("//")&&(i=location.protocol+i),n[t]=new URL(i)}e=a.tj.split("/")[0]}),self.addEventListener("activate",t=>{t.waitUntil(Promise.all([self.clients.claim()]))}),self.addEventListener("install",t=>{t.waitUntil(self.skipWaiting())}),self.addEventListener("fetch",a=>{const i=a.request;["GET","OPTIONS"].indexOf(i.method)<0||e&&new URL(i.url).host==e||function(a){const i=a.request;a.respondWith(caches.match(i).then(async a=>a?a=await async function(a,i){return new Promise(async o=>{const c=()=>{o(i)};if(!e)return c();const r=new URL(a.url),l=r.host,h=r.pathname;"image"==a.destination||l==n.npm.host&&h==n.npm.pathname+"/6.js"?s(a):(n.js.host==l&&"/6.js"==h||l==n.site.host&&t.has(h.slice(1).split("/")[0]))&&await(async()=>{setTimeout(c,999),i=await s(a)})(),c()})}(i,a):s(i)))}(a)})